---
title: "Network messages"
menu: Cards
route: /docs/cards/network-messages
excerpt: Network messages provide a historical view of the details of ISO 8583-based request and responses from card networks.
types: 
  - guide
_tags:
  - network messages
  - iso8583
containerWide: true
showHeadingsNav: true
date: "07-15-2022"
---

import Callout from "src/gatsby-theme-docz/components/Callout";

# Network messages

Network messages provide a historical view of the details of ISO 8583-based messages generated during card payment processing. This includes requests received by the issuer processor during authorization and clearing activities as well as the responses generated by the issuer processor as needed.

## What we do

Episode Six (E6) stores the history of all network  messages received and generated when E6 has acted as the issuer processor. Network message are created in association with [authorization holds](/docs/transactions/authorization-holds) and [transactions](/docs/transactions/transactions) as they are created during payment processing. The network message object includes JSON-formatted details of the network message, additional card network or region specific attributes, and an encrypted XML of the raw ISO 8583 message. Network message can be retrieved directly, in relation to a transaction identifier, and by customer. As needed, network message objects are also obtained in the DTOs of various entities such as transactions.

<Callout
    calloutType={'info'}
>
    Some card network specific attributes may not appear in the base json-parsed network message object as they do not exist for both networks or are structured differently. Certain attributes such as these will appear in the ISO 8583 attributes array within the network message object. For more details of the ISO 8583 field and sub-element definitions, see the documentation from the issuing card network.
</Callout>

## Prerequisites

Before viewing network messages for a customer, a card for that customer must first have been used to make a card payment. This includes either live card payments or simulated card payments. For more information on how to simulate network messages, see [Card payment simulation](/docs/cards/card-payment-simulation).

## Actions

Any of the below approaches can be used to retrieve one or more network messages. E6 offers multiple ways to retrieve network messages as needed. For more information, see [Network Message APIs](/tech-specs/cards/network-messages) When returned in the API response, the raw network message is provided as a `base64` encoded `gzip` string. Once unzipped, the string will result in an XML file of the raw message. For an example of the unzipped XML file, see the Appendix.

## Appendix

### Card network message format

Card networks connect issuers and acquirers using a standard message format called ISO 8583. This message format supports all communications over the card network between issuers and acquirers for card payments and other operations such as balance inquiries. The ISO 8583 message for a card payment uses all the details of the card, the cardholder, the transaction, and the merchant or ATM needed to process the payment.

One of the key aspects of an ISO 8583 message is the MTI. This field sets the highest level of ISO 8583 message type. An MTI includes the ISO 8583 version, message class, message function, and message origin. The MTI is structured using four digits.

| Digit | Code | Description | Example |
| -- | -- | -- | -- |
| 1st | #xxx | ISO 8583 version. | ISO 8583:1987 |
| 2nd | x#xx | Message class. | Financial messages. |
| 3rd | xx#x | Message function. | Advice. |
| 4th | xxx# | Message origin. | Acquirer. |

The second digit of the MTI specifies the purpose of the message. The following message classes are commonly used.

| Code | Description | Usage |
| -- | -- | -- |
| x0xx | Reserved by ISO. | Usage reserved by ISO. |
| x1xx | Authorization message. | Determine if funds are available, get an approval but do not post to account for reconciliation. Dual message system (DMS), awaits file exchange for posting to the account. |
| x2xx | Financial messages. | Determine if funds are available, get an approval and post directly to the account. Single message system (SMS), no file exchange after this. |
| x4xx | Reversal and chargeback messages. | Reversal (x4x0 or x4x1): Reverses the action of a previous authorization. Chargeback (x4x2 or x4x3): Charges back a previously cleared financial message. |

The following standard MTIs are commonly used.

| Code | Description | Usage |
| -- | -- | -- |
| 0100 | Authorization Request. | Request from a POS terminal for authorization for a cardholder purchase. |
| 0110 | Authorization Response. | Request response to a POS terminal for authorization for a cardholder purchase. |
| 0120 | Authorization Advice. | Advisement that an authorization has occurred, typically in cases such as stand-in processing, fraud rule triggers, or signed vouchers. |
| 0121 | Authorization Advice Repeat. | When the advice times out. |
| 0130 | Issuer Response to Authorization Advice. | Confirmation of receipt of authorization advice. |
| 0200 | Acquirer Financial Request. | Request for funds by an ATM or POS device. |
| 0210 | Issuer Response to Financial Request. | Issuer response to request for funds. |
| 0220 | Acquirer Financial Advice. | Used to complete a transaction initiated with an authorization request. |
| 0221 | Acquirer Financial Advice Repeat. | If the advice times out. |
| 0230 | Issuer Response to Financial Advice. | Confirmation of receipt of financial advice. |
| 0400 | Acquirer Reversal Request. | Reverses a transaction. |

In the ISO 8583 format, different fields are redacted depending on the stage of transaction authorization.

For Banknet and Visa authorizations BASE 1 and SMS, the following fields are either obfuscated or contain empty values:

- 2 is obfuscated
- 35 has empty values
- 45 has empty values
- 52 has empty values
- 53 has empty values

In addition to these fields, Banknet also ensures the following fields contain empty values:

- 48 has empty values
- 125 has empty values
- 14 has empty values
- 36 has empty values

In addition to these fields, Visa also ensures the following fields contain empty values or are obfuscated:

- 126.9 has empty values
- 126.10 is obfuscated

For MasterCard GCMS IPM offline clearing and Visa BASE 2 offline clearing, which fields are obfuscated or contain empty values is dependent on how the message is mapped, using the ISO 8583 format.

In general, fewer fields are converted to an XML formatted message in this stage than in BASE 1. The specific included fields vary based on the needs of each payment network. For more information about ISO message fields, consult your payment network documentation.

### Raw message example

Below is an example raw network message XML file. It is important to remember that the raw messages are card scheme specific and will follow the card scheme formats. For more information on structure and fields, see the respective card scheme documentation.

```xml
<isomsg>
	<field id=\"0\" value=\"0100\"/>
	<field id=\"2\" value=\"*\"/>
	<field id=\"3\" value=\"000000\"/>
	<field id=\"4\" value=\"000000005633\"/>
	<field id=\"6\" value=\"000000003755\"/>
	<field id=\"7\" value=\"0315160425\"/>
	<field id=\"10\" value=\"76666000\"/>
	<field id=\"11\" value=\"000004\"/>
	<field id=\"12\" value=\"160425\"/>
	<field id=\"13\" value=\"0315\"/>
	<field id=\"15\" value=\"0315\"/>
	<field id=\"16\" value=\"0315\"/>
	<field id=\"18\" value=\"5311\"/>
	<field id=\"22\" value=\"072\"/>
	<field id=\"23\" value=\"001\"/>
	<field id=\"32\" value=\"999901\"/>
	<field id=\"37\" value=\"085037100011\"/>
	<field id=\"41\" value=\"MTF TEST\"/>
	<field id=\"42\" value=\"ABC123TESTMTF19\"/>
	<field id=\"43\" value=\"Department Store       Las Vegas         USA \"/>
	<field id=\"49\" value=\"840\"/>
	<field id=\"51\" value=\"826\"/>
	<field id=\"55\" value=\"5F2A020840820258008407A0000000041010950500000000009A032203159C01009F02060000000056339F10120110250000044000DAC100000000000000009F1A0208409F2608F74B81A9433809289F2701809F3303E0E8E89F34034103029F360201409F37042B65FF1F\" type=\"binary\"/>
	<field id=\"56\" value=\"013301295001ABCDEFGHIJ123456789012345\"/>
	<field id=\"61\" value=\"000000000030084011111-1111\"/>
	<field id=\"63\"value=\"MRW011B63\"/>
</isomsg>
```